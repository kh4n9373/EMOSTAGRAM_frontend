{"ast":null,"code":"var _jsxFileName = \"/Users/khangtuan/Documents/eq_test/eq_test_frontend_v2/src/views/page-community.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\nimport { Helmet } from 'react-helmet';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Container = ({\n  children\n}) => /*#__PURE__*/_jsxDEV(\"main\", {\n  style: {\n    maxWidth: 760,\n    margin: '0 auto',\n    padding: '0 16px'\n  },\n  children: children\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 5,\n  columnNumber: 3\n}, this);\n_c = Container;\nconst Composer = ({\n  topics,\n  onSubmit,\n  loading\n}) => {\n  _s();\n  const [topicId, setTopicId] = useState('');\n  const [context, setContext] = useState('');\n  const [question, setQuestion] = useState('');\n  const [imageFile, setImageFile] = useState(null);\n  const handleSubmit = e => {\n    e.preventDefault();\n    onSubmit({\n      topic_id: topicId ? Number(topicId) : null,\n      context,\n      question,\n      imageFile\n    }).then(() => {\n      setTopicId('');\n      setContext('');\n      setQuestion('');\n      setImageFile(null);\n    }).catch(() => {});\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    style: {\n      display: 'grid',\n      gap: 12,\n      padding: 16,\n      border: '1px solid #e5e7eb',\n      borderRadius: 16,\n      background: '#fff',\n      marginBottom: 12\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        gap: 12,\n        alignItems: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: 40,\n          height: 40,\n          borderRadius: 20,\n          background: '#e5e7eb'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: topicId,\n        onChange: e => setTopicId(e.target.value),\n        style: {\n          border: '1px solid #e5e7eb',\n          borderRadius: 10,\n          padding: '8px 10px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"Select topic (optional)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 31,\n          columnNumber: 11\n        }, this), (topics || []).map(t => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: t.id,\n          children: t.name\n        }, t.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n      placeholder: \"Describe the situation...\",\n      value: context,\n      onChange: e => setContext(e.target.value),\n      rows: 3,\n      style: {\n        width: '100%',\n        border: '1px solid #e5e7eb',\n        borderRadius: 12,\n        padding: 12,\n        fontSize: 16,\n        resize: 'vertical'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      placeholder: \"Open question for community...\",\n      value: question,\n      onChange: e => setQuestion(e.target.value),\n      style: {\n        width: '100%',\n        border: '1px solid #e5e7eb',\n        borderRadius: 12,\n        padding: 12,\n        fontSize: 16\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'space-between'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        style: {\n          cursor: 'pointer',\n          color: '#2563EB'\n        },\n        children: [\"+ Add image\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \"image/*\",\n          style: {\n            display: 'none'\n          },\n          onChange: e => setImageFile(e.target.files && e.target.files[0])\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        disabled: loading,\n        type: \"submit\",\n        style: {\n          border: '1px solid #e5e7eb',\n          background: '#fff',\n          padding: '8px 12px',\n          borderRadius: 999\n        },\n        children: loading ? 'Posting...' : 'Post'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 27,\n    columnNumber: 5\n  }, this);\n};\n_s(Composer, \"AtXfDNTVvxu4SqCmdSQtLfMjH0E=\");\n_c2 = Composer;\nconst XCard = ({\n  item\n}) => {\n  var _item$user, _item$user2, _item$user3, _item$user4, _item$stats$comments_, _item$stats, _item$stats$upvotes_c, _item$stats2, _item$stats$downvotes, _item$stats3, _item$stats$reactions, _item$stats4;\n  return /*#__PURE__*/_jsxDEV(\"article\", {\n    style: {\n      display: 'grid',\n      gridTemplateColumns: '48px 1fr',\n      gap: 12,\n      padding: 16,\n      border: '1px solid #e5e7eb',\n      borderRadius: 16,\n      background: 'rgba(255,255,255,0.85)'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      src: ((_item$user = item.user) === null || _item$user === void 0 ? void 0 : _item$user.picture) || ((_item$user2 = item.user) === null || _item$user2 === void 0 ? void 0 : _item$user2.avatarUrl),\n      alt: ((_item$user3 = item.user) === null || _item$user3 === void 0 ? void 0 : _item$user3.name) || 'user',\n      width: 48,\n      height: 48,\n      style: {\n        borderRadius: 24\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          alignItems: 'baseline',\n          gap: 8\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: ((_item$user4 = item.user) === null || _item$user4 === void 0 ? void 0 : _item$user4.name) || 'Anonymous'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            color: '#6b7280',\n            fontSize: 13\n          },\n          children: item.created_at\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          margin: '6px 0 6px 0'\n        },\n        children: item.context\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          margin: 0,\n          color: '#111'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"Q:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 47\n        }, this), \" \", item.question]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 7\n      }, this), item.image_url && /*#__PURE__*/_jsxDEV(\"img\", {\n        src: item.image_url,\n        alt: \"attachment\",\n        style: {\n          width: '100%',\n          borderRadius: 12,\n          marginTop: 10\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: 24,\n          marginTop: 10,\n          color: '#6b7280',\n          fontSize: 14\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"\\uD83D\\uDCAC \", (_item$stats$comments_ = (_item$stats = item.stats) === null || _item$stats === void 0 ? void 0 : _item$stats.comments_count) !== null && _item$stats$comments_ !== void 0 ? _item$stats$comments_ : 0]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"\\uD83D\\uDC4D \", (_item$stats$upvotes_c = (_item$stats2 = item.stats) === null || _item$stats2 === void 0 ? void 0 : _item$stats2.upvotes_count) !== null && _item$stats$upvotes_c !== void 0 ? _item$stats$upvotes_c : 0]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"\\uD83D\\uDC4E \", (_item$stats$downvotes = (_item$stats3 = item.stats) === null || _item$stats3 === void 0 ? void 0 : _item$stats3.downvotes_count) !== null && _item$stats$downvotes !== void 0 ? _item$stats$downvotes : 0]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"\\u2764\\uFE0F \", (_item$stats$reactions = (_item$stats4 = item.stats) === null || _item$stats4 === void 0 ? void 0 : _item$stats4.reactions_count) !== null && _item$stats$reactions !== void 0 ? _item$stats$reactions : 0]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 3\n  }, this);\n};\n_c3 = XCard;\nconst Skeleton = () => /*#__PURE__*/_jsxDEV(\"div\", {\n  style: {\n    display: 'grid',\n    gap: 12\n  },\n  children: [0, 1, 2].map(k => /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      height: 120,\n      borderRadius: 16,\n      border: '1px solid #eee',\n      background: 'linear-gradient(90deg,#f3f4f6 25%,#e5e7eb 37%,#f3f4f6 63%)',\n      backgroundSize: '400% 100%',\n      animation: 'pulse 1.4s ease infinite'\n    }\n  }, k, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 7\n  }, this))\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 74,\n  columnNumber: 3\n}, this);\n_c4 = Skeleton;\nconst useSituationsFeed = () => {\n  _s2();\n  const [items, setItems] = useState([]);\n  const [page, setPage] = useState(1);\n  const [loading, setLoading] = useState(false);\n  const [hasNext, setHasNext] = useState(true);\n  const load = (reset = false) => {\n    if (loading || !hasNext && !reset) return;\n    setLoading(true);\n    const nextPage = reset ? 1 : page;\n    fetch(`/api/v1/situations/feed?page=${nextPage}&limit=10`).then(r => r.json()).then(j => {\n      const data = (j === null || j === void 0 ? void 0 : j.data) || j;\n      const payload = (data === null || data === void 0 ? void 0 : data.data) || data;\n      const list = (payload === null || payload === void 0 ? void 0 : payload.items) || [];\n      const pag = payload === null || payload === void 0 ? void 0 : payload.pagination;\n      setItems(prev => reset ? list : prev.concat(list));\n      if (pag) {\n        setHasNext(!!pag.has_next);\n        setPage(nextPage + 1);\n      } else {\n        setHasNext(false);\n      }\n    }).finally(() => setLoading(false));\n  };\n  useEffect(() => {\n    load(true);\n  }, []);\n  return {\n    items,\n    loading,\n    hasNext,\n    load\n  };\n};\n_s2(useSituationsFeed, \"2OO8U5B6GHQTHqTyYR8XBuvpZHs=\");\nconst CommunityPage = () => {\n  _s3();\n  const feed = useSituationsFeed();\n  const sentinelRef = useRef(null);\n  const [topics, setTopics] = useState([]);\n  const [posting, setPosting] = useState(false);\n  useEffect(() => {\n    const el = sentinelRef.current;\n    if (!el) return;\n    const io = new IntersectionObserver(entries => {\n      entries.forEach(e => {\n        if (e.isIntersecting) feed.load();\n      });\n    });\n    io.observe(el);\n    return () => io.disconnect();\n  }, [sentinelRef.current, feed]);\n  useEffect(() => {\n    fetch('/api/v1/topics').then(r => r.json()).then(j => {\n      const data = (j === null || j === void 0 ? void 0 : j.data) || j;\n      setTopics(Array.isArray(data === null || data === void 0 ? void 0 : data.data) ? data.data : (data === null || data === void 0 ? void 0 : data.items) || data || []);\n    }).catch(() => {});\n  }, []);\n  const uploadToCloudinary = async file => {\n    const url = 'https://api.cloudinary.com/v1_1/duqmsoxk4/image/upload';\n    const formData = new FormData();\n    formData.append('file', file);\n    formData.append('upload_preset', 'emotional');\n    const res = await fetch(url, {\n      method: 'POST',\n      body: formData\n    });\n    const data = await res.json();\n    return data.secure_url;\n  };\n  const handleSubmit = async ({\n    topic_id,\n    context,\n    question,\n    imageFile\n  }) => {\n    if (!(context !== null && context !== void 0 && context.trim()) || !(question !== null && question !== void 0 && question.trim())) return Promise.reject();\n    try {\n      setPosting(true);\n      let image_url = '';\n      if (imageFile) image_url = await uploadToCloudinary(imageFile);\n      await fetch('/api/v1/situations/contribute', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          topic_id,\n          context,\n          question,\n          image_url\n        })\n      }).then(async r => {\n        if (!r.ok) throw new Error('post_failed');\n      });\n      feed.load(true);\n      return Promise.resolve();\n    } catch (e) {\n      return Promise.reject(e);\n    } finally {\n      setPosting(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(Helmet, {\n      children: /*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"Community\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Composer, {\n      topics: topics,\n      onSubmit: handleSubmit,\n      loading: posting\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'grid',\n        gap: 12\n      },\n      children: [feed.items.map(it => /*#__PURE__*/_jsxDEV(XCard, {\n        item: it\n      }, it.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 11\n      }, this)), !feed.items.length && /*#__PURE__*/_jsxDEV(Skeleton, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 32\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: sentinelRef,\n      style: {\n        height: 1\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 172,\n    columnNumber: 5\n  }, this);\n};\n_s3(CommunityPage, \"ej5u9oajqwaBYsSqWjJvRxAI3KA=\", false, function () {\n  return [useSituationsFeed];\n});\n_c5 = CommunityPage;\nexport default CommunityPage;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"Container\");\n$RefreshReg$(_c2, \"Composer\");\n$RefreshReg$(_c3, \"XCard\");\n$RefreshReg$(_c4, \"Skeleton\");\n$RefreshReg$(_c5, \"CommunityPage\");","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","Helmet","jsxDEV","_jsxDEV","Container","children","style","maxWidth","margin","padding","fileName","_jsxFileName","lineNumber","columnNumber","_c","Composer","topics","onSubmit","loading","_s","topicId","setTopicId","context","setContext","question","setQuestion","imageFile","setImageFile","handleSubmit","e","preventDefault","topic_id","Number","then","catch","display","gap","border","borderRadius","background","marginBottom","alignItems","width","height","value","onChange","target","map","t","id","name","placeholder","rows","fontSize","resize","justifyContent","cursor","color","type","accept","files","disabled","_c2","XCard","item","_item$user","_item$user2","_item$user3","_item$user4","_item$stats$comments_","_item$stats","_item$stats$upvotes_c","_item$stats2","_item$stats$downvotes","_item$stats3","_item$stats$reactions","_item$stats4","gridTemplateColumns","src","user","picture","avatarUrl","alt","created_at","image_url","marginTop","stats","comments_count","upvotes_count","downvotes_count","reactions_count","_c3","Skeleton","k","backgroundSize","animation","_c4","useSituationsFeed","_s2","items","setItems","page","setPage","setLoading","hasNext","setHasNext","load","reset","nextPage","fetch","r","json","j","data","payload","list","pag","pagination","prev","concat","has_next","finally","CommunityPage","_s3","feed","sentinelRef","setTopics","posting","setPosting","el","current","io","IntersectionObserver","entries","forEach","isIntersecting","observe","disconnect","Array","isArray","uploadToCloudinary","file","url","formData","FormData","append","res","method","body","secure_url","trim","Promise","reject","headers","JSON","stringify","ok","Error","resolve","it","length","ref","_c5","$RefreshReg$"],"sources":["/Users/khangtuan/Documents/eq_test/eq_test_frontend_v2/src/views/page-community.js"],"sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from 'react'\nimport { Helmet } from 'react-helmet'\n\nconst Container = ({ children }) => (\n  <main style={{ maxWidth: 760, margin: '0 auto', padding: '0 16px' }}>{children}</main>\n)\n\nconst Composer = ({ topics, onSubmit, loading }) => {\n  const [topicId, setTopicId] = useState('')\n  const [context, setContext] = useState('')\n  const [question, setQuestion] = useState('')\n  const [imageFile, setImageFile] = useState(null)\n\n  const handleSubmit = (e) => {\n    e.preventDefault()\n    onSubmit({ topic_id: topicId ? Number(topicId) : null, context, question, imageFile })\n      .then(() => {\n        setTopicId('')\n        setContext('')\n        setQuestion('')\n        setImageFile(null)\n      })\n      .catch(() => {})\n  }\n\n  return (\n    <form onSubmit={handleSubmit} style={{ display: 'grid', gap: 12, padding: 16, border: '1px solid #e5e7eb', borderRadius: 16, background: '#fff', marginBottom: 12 }}>\n      <div style={{ display: 'flex', gap: 12, alignItems: 'center' }}>\n        <div style={{ width: 40, height: 40, borderRadius: 20, background: '#e5e7eb' }} />\n        <select value={topicId} onChange={(e) => setTopicId(e.target.value)} style={{ border: '1px solid #e5e7eb', borderRadius: 10, padding: '8px 10px' }}>\n          <option value=\"\">Select topic (optional)</option>\n          {(topics || []).map((t) => (\n            <option key={t.id} value={t.id}>{t.name}</option>\n          ))}\n        </select>\n      </div>\n      <textarea placeholder=\"Describe the situation...\" value={context} onChange={(e) => setContext(e.target.value)} rows={3} style={{ width: '100%', border: '1px solid #e5e7eb', borderRadius: 12, padding: 12, fontSize: 16, resize: 'vertical' }} />\n      <input placeholder=\"Open question for community...\" value={question} onChange={(e) => setQuestion(e.target.value)} style={{ width: '100%', border: '1px solid #e5e7eb', borderRadius: 12, padding: 12, fontSize: 16 }} />\n      <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\n        <label style={{ cursor: 'pointer', color: '#2563EB' }}>\n          + Add image\n          <input type=\"file\" accept=\"image/*\" style={{ display: 'none' }} onChange={(e) => setImageFile(e.target.files && e.target.files[0])} />\n        </label>\n        <button disabled={loading} type=\"submit\" style={{ border: '1px solid #e5e7eb', background: '#fff', padding: '8px 12px', borderRadius: 999 }}>{loading ? 'Posting...' : 'Post'}</button>\n      </div>\n    </form>\n  )\n}\n\nconst XCard = ({ item }) => (\n  <article style={{ display: 'grid', gridTemplateColumns: '48px 1fr', gap: 12, padding: 16, border: '1px solid #e5e7eb', borderRadius: 16, background: 'rgba(255,255,255,0.85)' }}>\n    <img src={item.user?.picture || item.user?.avatarUrl} alt={item.user?.name || 'user'} width={48} height={48} style={{ borderRadius: 24 }} />\n    <div>\n      <div style={{ display: 'flex', alignItems: 'baseline', gap: 8 }}>\n        <strong>{item.user?.name || 'Anonymous'}</strong>\n        <span style={{ color: '#6b7280', fontSize: 13 }}>{item.created_at}</span>\n      </div>\n      <p style={{ margin: '6px 0 6px 0' }}>{item.context}</p>\n      <p style={{ margin: 0, color: '#111' }}><b>Q:</b> {item.question}</p>\n      {item.image_url && (\n        <img src={item.image_url} alt=\"attachment\" style={{ width: '100%', borderRadius: 12, marginTop: 10 }} />\n      )}\n      <div style={{ display: 'flex', gap: 24, marginTop: 10, color: '#6b7280', fontSize: 14 }}>\n        <span>💬 {item.stats?.comments_count ?? 0}</span>\n        <span>👍 {item.stats?.upvotes_count ?? 0}</span>\n        <span>👎 {item.stats?.downvotes_count ?? 0}</span>\n        <span>❤️ {item.stats?.reactions_count ?? 0}</span>\n      </div>\n    </div>\n  </article>\n)\n\nconst Skeleton = () => (\n  <div style={{ display: 'grid', gap: 12 }}>\n    {[0,1,2].map((k) => (\n      <div key={k} style={{ height: 120, borderRadius: 16, border: '1px solid #eee', background: 'linear-gradient(90deg,#f3f4f6 25%,#e5e7eb 37%,#f3f4f6 63%)', backgroundSize: '400% 100%', animation: 'pulse 1.4s ease infinite' }} />\n    ))}\n  </div>\n)\n\nconst useSituationsFeed = () => {\n  const [items, setItems] = useState([])\n  const [page, setPage] = useState(1)\n  const [loading, setLoading] = useState(false)\n  const [hasNext, setHasNext] = useState(true)\n\n  const load = (reset = false) => {\n    if (loading || (!hasNext && !reset)) return\n    setLoading(true)\n    const nextPage = reset ? 1 : page\n    fetch(`/api/v1/situations/feed?page=${nextPage}&limit=10`)\n      .then((r) => r.json())\n      .then((j) => {\n        const data = j?.data || j\n        const payload = data?.data || data\n        const list = payload?.items || []\n        const pag = payload?.pagination\n        setItems((prev) => (reset ? list : prev.concat(list)))\n        if (pag) {\n          setHasNext(!!pag.has_next)\n          setPage(nextPage + 1)\n        } else {\n          setHasNext(false)\n        }\n      })\n      .finally(() => setLoading(false))\n  }\n\n  useEffect(() => { load(true) }, [])\n  return { items, loading, hasNext, load }\n}\n\nconst CommunityPage = () => {\n  const feed = useSituationsFeed()\n  const sentinelRef = useRef(null)\n  const [topics, setTopics] = useState([])\n  const [posting, setPosting] = useState(false)\n\n  useEffect(() => {\n    const el = sentinelRef.current\n    if (!el) return\n    const io = new IntersectionObserver((entries) => {\n      entries.forEach((e) => { if (e.isIntersecting) feed.load() })\n    })\n    io.observe(el)\n    return () => io.disconnect()\n  }, [sentinelRef.current, feed])\n\n  useEffect(() => {\n    fetch('/api/v1/topics')\n      .then((r) => r.json())\n      .then((j) => {\n        const data = j?.data || j\n        setTopics(Array.isArray(data?.data) ? data.data : data?.items || data || [])\n      })\n      .catch(() => {})\n  }, [])\n\n  const uploadToCloudinary = async (file) => {\n    const url = 'https://api.cloudinary.com/v1_1/duqmsoxk4/image/upload'\n    const formData = new FormData()\n    formData.append('file', file)\n    formData.append('upload_preset', 'emotional')\n    const res = await fetch(url, { method: 'POST', body: formData })\n    const data = await res.json()\n    return data.secure_url\n  }\n\n  const handleSubmit = async ({ topic_id, context, question, imageFile }) => {\n    if (!context?.trim() || !question?.trim()) return Promise.reject()\n    try {\n      setPosting(true)\n      let image_url = ''\n      if (imageFile) image_url = await uploadToCloudinary(imageFile)\n      await fetch('/api/v1/situations/contribute', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ topic_id, context, question, image_url }),\n      }).then(async (r) => {\n        if (!r.ok) throw new Error('post_failed')\n      })\n      feed.load(true)\n      return Promise.resolve()\n    } catch (e) {\n      return Promise.reject(e)\n    } finally {\n      setPosting(false)\n    }\n  }\n\n  return (\n    <Container>\n      <Helmet>\n        <title>Community</title>\n      </Helmet>\n      <Composer topics={topics} onSubmit={handleSubmit} loading={posting} />\n      <div style={{ display: 'grid', gap: 12 }}>\n        {feed.items.map((it) => (\n          <XCard key={it.id} item={it} />\n        ))}\n        {!feed.items.length && <Skeleton />}\n      </div>\n      <div ref={sentinelRef} style={{ height: 1 }} />\n    </Container>\n  )\n}\n\nexport default CommunityPage\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}