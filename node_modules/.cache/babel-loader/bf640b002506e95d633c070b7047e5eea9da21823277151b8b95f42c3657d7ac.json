{"ast":null,"code":"var _jsxFileName = \"/Users/khangtuan/Documents/eq_test/eq_test_frontend_v2/src/views/page-community.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\nimport { Helmet } from 'react-helmet';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Container = ({\n  children\n}) => /*#__PURE__*/_jsxDEV(\"main\", {\n  style: {\n    maxWidth: 760,\n    margin: '0 auto',\n    padding: '0 16px'\n  },\n  children: children\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 5,\n  columnNumber: 3\n}, this);\n_c = Container;\nconst Composer = ({\n  topics,\n  onSubmit,\n  loading,\n  notice\n}) => {\n  _s();\n  const [topicId, setTopicId] = useState('');\n  const [context, setContext] = useState('');\n  const [question, setQuestion] = useState('');\n  const [imageFile, setImageFile] = useState(null);\n  const handleSubmit = e => {\n    e.preventDefault();\n    onSubmit({\n      topic_id: topicId ? Number(topicId) : null,\n      context,\n      question,\n      imageFile\n    }).then(() => {\n      setTopicId('');\n      setContext('');\n      setQuestion('');\n      setImageFile(null);\n    }).catch(() => {});\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    style: {\n      display: 'grid',\n      gap: 12,\n      padding: 16,\n      border: '1px solid #e5e7eb',\n      borderRadius: 16,\n      background: '#fff',\n      marginBottom: 12\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        gap: 12,\n        alignItems: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: 40,\n          height: 40,\n          borderRadius: 20,\n          background: '#e5e7eb'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: topicId,\n        onChange: e => setTopicId(e.target.value),\n        style: {\n          border: '1px solid #e5e7eb',\n          borderRadius: 10,\n          padding: '8px 10px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"Select topic (optional)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 31,\n          columnNumber: 11\n        }, this), (topics || []).map(t => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: t.id,\n          children: t.name\n        }, t.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n      placeholder: \"Describe the situation...\",\n      value: context,\n      onChange: e => setContext(e.target.value),\n      rows: 3,\n      style: {\n        width: '100%',\n        border: '1px solid #e5e7eb',\n        borderRadius: 12,\n        padding: 12,\n        fontSize: 16,\n        resize: 'vertical'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      placeholder: \"Open question for community...\",\n      value: question,\n      onChange: e => setQuestion(e.target.value),\n      style: {\n        width: '100%',\n        border: '1px solid #e5e7eb',\n        borderRadius: 12,\n        padding: 12,\n        fontSize: 16\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'space-between'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        style: {\n          cursor: 'pointer',\n          color: '#2563EB'\n        },\n        children: [\"+ Add image\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \"image/*\",\n          style: {\n            display: 'none'\n          },\n          onChange: e => setImageFile(e.target.files && e.target.files[0])\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        disabled: loading,\n        type: \"submit\",\n        style: {\n          border: '1px solid #e5e7eb',\n          background: '#fff',\n          padding: '8px 12px',\n          borderRadius: 999\n        },\n        children: loading ? 'Posting...' : 'Post'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this), notice && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: notice.type === 'error' ? '#fee2e2' : '#ecfeff',\n        color: notice.type === 'error' ? '#991b1b' : '#155e75',\n        border: '1px solid #e5e7eb',\n        borderRadius: 10,\n        padding: '8px 10px'\n      },\n      children: notice.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 27,\n    columnNumber: 5\n  }, this);\n};\n_s(Composer, \"AtXfDNTVvxu4SqCmdSQtLfMjH0E=\");\n_c2 = Composer;\nconst XCard = ({\n  item\n}) => {\n  var _item$user, _item$user2, _item$user3, _item$user4, _item$stats$comments_, _item$stats, _item$stats$upvotes_c, _item$stats2, _item$stats$downvotes, _item$stats3, _item$stats$reactions, _item$stats4;\n  return /*#__PURE__*/_jsxDEV(\"article\", {\n    style: {\n      display: 'grid',\n      gridTemplateColumns: '48px 1fr',\n      gap: 12,\n      padding: 16,\n      border: '1px solid #e5e7eb',\n      borderRadius: 16,\n      background: 'rgba(255,255,255,0.85)'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      src: ((_item$user = item.user) === null || _item$user === void 0 ? void 0 : _item$user.picture) || ((_item$user2 = item.user) === null || _item$user2 === void 0 ? void 0 : _item$user2.avatarUrl),\n      alt: ((_item$user3 = item.user) === null || _item$user3 === void 0 ? void 0 : _item$user3.name) || 'user',\n      width: 48,\n      height: 48,\n      style: {\n        borderRadius: 24\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          alignItems: 'baseline',\n          gap: 8\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: ((_item$user4 = item.user) === null || _item$user4 === void 0 ? void 0 : _item$user4.name) || 'Anonymous'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            color: '#6b7280',\n            fontSize: 13\n          },\n          children: item.created_at\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          margin: '6px 0 6px 0'\n        },\n        children: item.context\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          margin: 0,\n          color: '#111'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"Q:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 47\n        }, this), \" \", item.question]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 7\n      }, this), item.image_url && /*#__PURE__*/_jsxDEV(\"img\", {\n        src: item.image_url,\n        alt: \"attachment\",\n        style: {\n          width: '100%',\n          borderRadius: 12,\n          marginTop: 10\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: 24,\n          marginTop: 10,\n          color: '#6b7280',\n          fontSize: 14\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"\\uD83D\\uDCAC \", (_item$stats$comments_ = (_item$stats = item.stats) === null || _item$stats === void 0 ? void 0 : _item$stats.comments_count) !== null && _item$stats$comments_ !== void 0 ? _item$stats$comments_ : 0]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"\\uD83D\\uDC4D \", (_item$stats$upvotes_c = (_item$stats2 = item.stats) === null || _item$stats2 === void 0 ? void 0 : _item$stats2.upvotes_count) !== null && _item$stats$upvotes_c !== void 0 ? _item$stats$upvotes_c : 0]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"\\uD83D\\uDC4E \", (_item$stats$downvotes = (_item$stats3 = item.stats) === null || _item$stats3 === void 0 ? void 0 : _item$stats3.downvotes_count) !== null && _item$stats$downvotes !== void 0 ? _item$stats$downvotes : 0]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"\\u2764\\uFE0F \", (_item$stats$reactions = (_item$stats4 = item.stats) === null || _item$stats4 === void 0 ? void 0 : _item$stats4.reactions_count) !== null && _item$stats$reactions !== void 0 ? _item$stats$reactions : 0]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 3\n  }, this);\n};\n_c3 = XCard;\nconst Skeleton = () => /*#__PURE__*/_jsxDEV(\"div\", {\n  style: {\n    display: 'grid',\n    gap: 12\n  },\n  children: [0, 1, 2].map(k => /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      height: 120,\n      borderRadius: 16,\n      border: '1px solid #eee',\n      background: 'linear-gradient(90deg,#f3f4f6 25%,#e5e7eb 37%,#f3f4f6 63%)',\n      backgroundSize: '400% 100%',\n      animation: 'pulse 1.4s ease infinite'\n    }\n  }, k, false, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 7\n  }, this))\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 85,\n  columnNumber: 3\n}, this);\n_c4 = Skeleton;\nconst useSituationsFeed = () => {\n  _s2();\n  const [items, setItems] = useState([]);\n  const [page, setPage] = useState(1);\n  const [loading, setLoading] = useState(false);\n  const [hasNext, setHasNext] = useState(true);\n  const load = (reset = false) => {\n    if (loading || !hasNext && !reset) return;\n    setLoading(true);\n    const nextPage = reset ? 1 : page;\n    fetch(`/api/v1/situations/feed?page=${nextPage}&limit=10`, {\n      credentials: 'include'\n    }).then(r => r.json()).then(j => {\n      const data = (j === null || j === void 0 ? void 0 : j.data) || j;\n      const payload = (data === null || data === void 0 ? void 0 : data.data) || data;\n      const list = (payload === null || payload === void 0 ? void 0 : payload.items) || [];\n      const pag = payload === null || payload === void 0 ? void 0 : payload.pagination;\n      setItems(prev => reset ? list : prev.concat(list));\n      if (pag) {\n        setHasNext(!!pag.has_next);\n        setPage(nextPage + 1);\n      } else {\n        setHasNext(false);\n      }\n    }).finally(() => setLoading(false));\n  };\n  useEffect(() => {\n    load(true);\n  }, []);\n  return {\n    items,\n    loading,\n    hasNext,\n    load\n  };\n};\n_s2(useSituationsFeed, \"2OO8U5B6GHQTHqTyYR8XBuvpZHs=\");\nconst CommunityPage = () => {\n  _s3();\n  const feed = useSituationsFeed();\n  const sentinelRef = useRef(null);\n  const [topics, setTopics] = useState([]);\n  const [posting, setPosting] = useState(false);\n  useEffect(() => {\n    const el = sentinelRef.current;\n    if (!el) return;\n    const io = new IntersectionObserver(entries => {\n      entries.forEach(e => {\n        if (e.isIntersecting) feed.load();\n      });\n    });\n    io.observe(el);\n    return () => io.disconnect();\n  }, [sentinelRef.current, feed]);\n  useEffect(() => {\n    fetch('/api/v1/topics', {\n      credentials: 'include'\n    }).then(r => r.json()).then(j => {\n      const data = (j === null || j === void 0 ? void 0 : j.data) || j;\n      setTopics(Array.isArray(data === null || data === void 0 ? void 0 : data.data) ? data.data : (data === null || data === void 0 ? void 0 : data.items) || data || []);\n    }).catch(() => {});\n  }, []);\n  const uploadToCloudinary = async file => {\n    const url = 'https://api.cloudinary.com/v1_1/duqmsoxk4/image/upload';\n    const formData = new FormData();\n    formData.append('file', file);\n    formData.append('upload_preset', 'emotional');\n    const res = await fetch(url, {\n      method: 'POST',\n      body: formData\n    });\n    const data = await res.json();\n    return data.secure_url;\n  };\n  const [notice, setNotice] = useState(null);\n  const handleSubmit = async ({\n    topic_id,\n    context,\n    question,\n    imageFile\n  }) => {\n    if (!(context !== null && context !== void 0 && context.trim()) || !(question !== null && question !== void 0 && question.trim())) return Promise.reject();\n    try {\n      setPosting(true);\n      let image_url = '';\n      if (imageFile) image_url = await uploadToCloudinary(imageFile);\n      const res = await fetch('/api/v1/situations/contribute', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n          topic_id,\n          context,\n          question,\n          image_url\n        })\n      });\n      if (!res.ok) {\n        if (res.status === 401) {\n          setNotice({\n            type: 'error',\n            message: 'Vui lòng đăng nhập để đăng bài.'\n          });\n        } else {\n          const err = await res.text();\n          setNotice({\n            type: 'error',\n            message: `Đăng bài thất bại: ${err || res.status}`\n          });\n        }\n        throw new Error('post_failed');\n      }\n      setNotice({\n        type: 'success',\n        message: 'Đăng bài thành công.'\n      });\n      feed.load(true);\n      return Promise.resolve();\n    } catch (e) {\n      return Promise.reject(e);\n    } finally {\n      setPosting(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(Helmet, {\n      children: /*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"Community\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Composer, {\n      topics: topics,\n      onSubmit: handleSubmit,\n      loading: posting,\n      notice: notice\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'grid',\n        gap: 12\n      },\n      children: [feed.items.map(it => /*#__PURE__*/_jsxDEV(XCard, {\n        item: it\n      }, it.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 11\n      }, this)), !feed.items.length && /*#__PURE__*/_jsxDEV(Skeleton, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 32\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: sentinelRef,\n      style: {\n        height: 1\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 194,\n    columnNumber: 5\n  }, this);\n};\n_s3(CommunityPage, \"jhB89poCSdKLRv2E6470mVNYwwc=\", false, function () {\n  return [useSituationsFeed];\n});\n_c5 = CommunityPage;\nexport default CommunityPage;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"Container\");\n$RefreshReg$(_c2, \"Composer\");\n$RefreshReg$(_c3, \"XCard\");\n$RefreshReg$(_c4, \"Skeleton\");\n$RefreshReg$(_c5, \"CommunityPage\");","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","Helmet","jsxDEV","_jsxDEV","Container","children","style","maxWidth","margin","padding","fileName","_jsxFileName","lineNumber","columnNumber","_c","Composer","topics","onSubmit","loading","notice","_s","topicId","setTopicId","context","setContext","question","setQuestion","imageFile","setImageFile","handleSubmit","e","preventDefault","topic_id","Number","then","catch","display","gap","border","borderRadius","background","marginBottom","alignItems","width","height","value","onChange","target","map","t","id","name","placeholder","rows","fontSize","resize","justifyContent","cursor","color","type","accept","files","disabled","message","_c2","XCard","item","_item$user","_item$user2","_item$user3","_item$user4","_item$stats$comments_","_item$stats","_item$stats$upvotes_c","_item$stats2","_item$stats$downvotes","_item$stats3","_item$stats$reactions","_item$stats4","gridTemplateColumns","src","user","picture","avatarUrl","alt","created_at","image_url","marginTop","stats","comments_count","upvotes_count","downvotes_count","reactions_count","_c3","Skeleton","k","backgroundSize","animation","_c4","useSituationsFeed","_s2","items","setItems","page","setPage","setLoading","hasNext","setHasNext","load","reset","nextPage","fetch","credentials","r","json","j","data","payload","list","pag","pagination","prev","concat","has_next","finally","CommunityPage","_s3","feed","sentinelRef","setTopics","posting","setPosting","el","current","io","IntersectionObserver","entries","forEach","isIntersecting","observe","disconnect","Array","isArray","uploadToCloudinary","file","url","formData","FormData","append","res","method","body","secure_url","setNotice","trim","Promise","reject","headers","JSON","stringify","ok","status","err","text","Error","resolve","it","length","ref","_c5","$RefreshReg$"],"sources":["/Users/khangtuan/Documents/eq_test/eq_test_frontend_v2/src/views/page-community.js"],"sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from 'react'\nimport { Helmet } from 'react-helmet'\n\nconst Container = ({ children }) => (\n  <main style={{ maxWidth: 760, margin: '0 auto', padding: '0 16px' }}>{children}</main>\n)\n\nconst Composer = ({ topics, onSubmit, loading, notice }) => {\n  const [topicId, setTopicId] = useState('')\n  const [context, setContext] = useState('')\n  const [question, setQuestion] = useState('')\n  const [imageFile, setImageFile] = useState(null)\n\n  const handleSubmit = (e) => {\n    e.preventDefault()\n    onSubmit({ topic_id: topicId ? Number(topicId) : null, context, question, imageFile })\n      .then(() => {\n        setTopicId('')\n        setContext('')\n        setQuestion('')\n        setImageFile(null)\n      })\n      .catch(() => {})\n  }\n\n  return (\n    <form onSubmit={handleSubmit} style={{ display: 'grid', gap: 12, padding: 16, border: '1px solid #e5e7eb', borderRadius: 16, background: '#fff', marginBottom: 12 }}>\n      <div style={{ display: 'flex', gap: 12, alignItems: 'center' }}>\n        <div style={{ width: 40, height: 40, borderRadius: 20, background: '#e5e7eb' }} />\n        <select value={topicId} onChange={(e) => setTopicId(e.target.value)} style={{ border: '1px solid #e5e7eb', borderRadius: 10, padding: '8px 10px' }}>\n          <option value=\"\">Select topic (optional)</option>\n          {(topics || []).map((t) => (\n            <option key={t.id} value={t.id}>{t.name}</option>\n          ))}\n        </select>\n      </div>\n      <textarea placeholder=\"Describe the situation...\" value={context} onChange={(e) => setContext(e.target.value)} rows={3} style={{ width: '100%', border: '1px solid #e5e7eb', borderRadius: 12, padding: 12, fontSize: 16, resize: 'vertical' }} />\n      <input placeholder=\"Open question for community...\" value={question} onChange={(e) => setQuestion(e.target.value)} style={{ width: '100%', border: '1px solid #e5e7eb', borderRadius: 12, padding: 12, fontSize: 16 }} />\n      <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\n        <label style={{ cursor: 'pointer', color: '#2563EB' }}>\n          + Add image\n          <input type=\"file\" accept=\"image/*\" style={{ display: 'none' }} onChange={(e) => setImageFile(e.target.files && e.target.files[0])} />\n        </label>\n        <button disabled={loading} type=\"submit\" style={{ border: '1px solid #e5e7eb', background: '#fff', padding: '8px 12px', borderRadius: 999 }}>{loading ? 'Posting...' : 'Post'}</button>\n      </div>\n      {notice && (\n        <div style={{\n          background: notice.type === 'error' ? '#fee2e2' : '#ecfeff',\n          color: notice.type === 'error' ? '#991b1b' : '#155e75',\n          border: '1px solid #e5e7eb',\n          borderRadius: 10,\n          padding: '8px 10px'\n        }}>\n          {notice.message}\n        </div>\n      )}\n    </form>\n  )\n}\n\nconst XCard = ({ item }) => (\n  <article style={{ display: 'grid', gridTemplateColumns: '48px 1fr', gap: 12, padding: 16, border: '1px solid #e5e7eb', borderRadius: 16, background: 'rgba(255,255,255,0.85)' }}>\n    <img src={item.user?.picture || item.user?.avatarUrl} alt={item.user?.name || 'user'} width={48} height={48} style={{ borderRadius: 24 }} />\n    <div>\n      <div style={{ display: 'flex', alignItems: 'baseline', gap: 8 }}>\n        <strong>{item.user?.name || 'Anonymous'}</strong>\n        <span style={{ color: '#6b7280', fontSize: 13 }}>{item.created_at}</span>\n      </div>\n      <p style={{ margin: '6px 0 6px 0' }}>{item.context}</p>\n      <p style={{ margin: 0, color: '#111' }}><b>Q:</b> {item.question}</p>\n      {item.image_url && (\n        <img src={item.image_url} alt=\"attachment\" style={{ width: '100%', borderRadius: 12, marginTop: 10 }} />\n      )}\n      <div style={{ display: 'flex', gap: 24, marginTop: 10, color: '#6b7280', fontSize: 14 }}>\n        <span>💬 {item.stats?.comments_count ?? 0}</span>\n        <span>👍 {item.stats?.upvotes_count ?? 0}</span>\n        <span>👎 {item.stats?.downvotes_count ?? 0}</span>\n        <span>❤️ {item.stats?.reactions_count ?? 0}</span>\n      </div>\n    </div>\n  </article>\n)\n\nconst Skeleton = () => (\n  <div style={{ display: 'grid', gap: 12 }}>\n    {[0,1,2].map((k) => (\n      <div key={k} style={{ height: 120, borderRadius: 16, border: '1px solid #eee', background: 'linear-gradient(90deg,#f3f4f6 25%,#e5e7eb 37%,#f3f4f6 63%)', backgroundSize: '400% 100%', animation: 'pulse 1.4s ease infinite' }} />\n    ))}\n  </div>\n)\n\nconst useSituationsFeed = () => {\n  const [items, setItems] = useState([])\n  const [page, setPage] = useState(1)\n  const [loading, setLoading] = useState(false)\n  const [hasNext, setHasNext] = useState(true)\n\n  const load = (reset = false) => {\n    if (loading || (!hasNext && !reset)) return\n    setLoading(true)\n    const nextPage = reset ? 1 : page\n    fetch(`/api/v1/situations/feed?page=${nextPage}&limit=10`, { credentials: 'include' })\n      .then((r) => r.json())\n      .then((j) => {\n        const data = j?.data || j\n        const payload = data?.data || data\n        const list = payload?.items || []\n        const pag = payload?.pagination\n        setItems((prev) => (reset ? list : prev.concat(list)))\n        if (pag) {\n          setHasNext(!!pag.has_next)\n          setPage(nextPage + 1)\n        } else {\n          setHasNext(false)\n        }\n      })\n      .finally(() => setLoading(false))\n  }\n\n  useEffect(() => { load(true) }, [])\n  return { items, loading, hasNext, load }\n}\n\nconst CommunityPage = () => {\n  const feed = useSituationsFeed()\n  const sentinelRef = useRef(null)\n  const [topics, setTopics] = useState([])\n  const [posting, setPosting] = useState(false)\n\n  useEffect(() => {\n    const el = sentinelRef.current\n    if (!el) return\n    const io = new IntersectionObserver((entries) => {\n      entries.forEach((e) => { if (e.isIntersecting) feed.load() })\n    })\n    io.observe(el)\n    return () => io.disconnect()\n  }, [sentinelRef.current, feed])\n\n  useEffect(() => {\n    fetch('/api/v1/topics', { credentials: 'include' })\n      .then((r) => r.json())\n      .then((j) => {\n        const data = j?.data || j\n        setTopics(Array.isArray(data?.data) ? data.data : data?.items || data || [])\n      })\n      .catch(() => {})\n  }, [])\n\n  const uploadToCloudinary = async (file) => {\n    const url = 'https://api.cloudinary.com/v1_1/duqmsoxk4/image/upload'\n    const formData = new FormData()\n    formData.append('file', file)\n    formData.append('upload_preset', 'emotional')\n    const res = await fetch(url, { method: 'POST', body: formData })\n    const data = await res.json()\n    return data.secure_url\n  }\n\n  const [notice, setNotice] = useState(null)\n\n  const handleSubmit = async ({ topic_id, context, question, imageFile }) => {\n    if (!context?.trim() || !question?.trim()) return Promise.reject()\n    try {\n      setPosting(true)\n      let image_url = ''\n      if (imageFile) image_url = await uploadToCloudinary(imageFile)\n      const res = await fetch('/api/v1/situations/contribute', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'include',\n        body: JSON.stringify({ topic_id, context, question, image_url }),\n      })\n      if (!res.ok) {\n        if (res.status === 401) {\n          setNotice({ type: 'error', message: 'Vui lòng đăng nhập để đăng bài.' })\n        } else {\n          const err = await res.text()\n          setNotice({ type: 'error', message: `Đăng bài thất bại: ${err || res.status}` })\n        }\n        throw new Error('post_failed')\n      }\n      setNotice({ type: 'success', message: 'Đăng bài thành công.' })\n      feed.load(true)\n      return Promise.resolve()\n    } catch (e) {\n      return Promise.reject(e)\n    } finally {\n      setPosting(false)\n    }\n  }\n\n  return (\n    <Container>\n      <Helmet>\n        <title>Community</title>\n      </Helmet>\n      <Composer topics={topics} onSubmit={handleSubmit} loading={posting} notice={notice} />\n      <div style={{ display: 'grid', gap: 12 }}>\n        {feed.items.map((it) => (\n          <XCard key={it.id} item={it} />\n        ))}\n        {!feed.items.length && <Skeleton />}\n      </div>\n      <div ref={sentinelRef} style={{ height: 1 }} />\n    </Container>\n  )\n}\n\nexport default CommunityPage\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}